<div class="container fullheight search-page">

  <div class="my-5 page-title">
    <h1>Explore<i class="fa-solid fa-play icon-logo"></i></h1>
  </div>

  <% if params[:category_id].present? %>
    <% @tois.each_with_index do |toi, index| %>
      <%= link_to toi_path(toi) do %>
        <div id="avatar-size" class="card flex-row justify-content-between <%= "bg-color-#{(index % 3) + 1}" %>">
          <div class="p-1">
            <div class="infos d-flex mb-2">
              <% if toi.posts.last %>
                <%= cl_image_tag toi.posts.last.user.photo.key, class: "avatar" %>
                <div>
                  <h2 class="fw-bold"><%= toi.title %></h2>
                  <p class="user">@<%= toi.posts.last.user.username %></p>
                </div>
              <% end %>
            </div>
            <% if toi.posts.last %>
              <p><%= toi.posts.last.review %></p>
            <% end %>
          </div>
          <%= cl_image_tag toi.photo.key, height: 300, crop: :fill, class: "img-toi" %>
        </div>
      <% end %>
    <% end %>
  <% else %>
      <% Category.all.each_with_index do |cat, index| %>
    <div id="avatar-size" class="card flex-row justify-content-between <%= "bg-color-#{(index % 3) + 1}" %>">
      <%= link_to cat.name, tois_path(category_id: cat.id), class: 'fw-bold text-black h3' %>
    </div>
    <% end %>
<% end %>

</div>
